
     include <BOSL2/std.scad>

    
        


        
        
                        arc_0 = [
                [15.47751630351649, -8.935948204222054, 0],  // center
                15.47751630351643,  // radius
                180,  // start angle (degrees)
                480  // end angle (degrees)
            ];


                        arc_1 = [
                [-15.47751630351648, -8.935948204222056, 0],  // center
                15.47751630351643,  // radius
                59.99999999999999,  // start angle (degrees)
                360  // end angle (degrees)
            ];


                        arc_2 = [
                [0, 17.87189640844412, 0],  // center
                15.47751630351643,  // radius
                300.00000000000006,  // start angle (degrees)
                599.9999999999999  // end angle (degrees)
            ];


        function arc_to_path(arc_def, n_segments=50) =
            let(
                center = arc_def[0],
                radius = arc_def[1],
                start_angle = arc_def[2],
                end_angle = arc_def[3],
                // Generate arc path using BOSL2
                arc_2d = arc(n=n_segments, r=radius, angle=[start_angle, end_angle])
            )
            // Translate arc to center position and add Z coordinate
            [for (p = arc_2d) [p.x + center[0], p.y + center[1], center[2]]];

        module sweep_arc(profile, arc_def, n_segments=50) {
            let(
                center = arc_def[0],
                radius = arc_def[1],
                start_angle = arc_def[2],
                end_angle = arc_def[3]
            )
            translate(center)
            path_sweep(profile, arc(n=n_segments, r=radius, angle=[start_angle, end_angle]));
        }

        
                circle_0 = [
    [0, 0, 0],  // center
    33.34941271196055  // radius
];
   
        
        // Convert circle definition to a 3D path using BOSL2's circle() function
    function circle_to_path(circle_def, n_segments=50) =
        let(
            center = circle_def[0],
            radius = circle_def[1],
            // Generate 2D circle and convert to 3D path
            circle_path_3d = path3d(circle(r=radius, $fn=n_segments))
        )
        // Translate circle path to center position
        [for (p = circle_path_3d) [p.x + center[0], p.y + center[1], p.z + center[2]]];

    // Sweep a circle with a profile
    module sweep_circle(profile, circle_def, n_segments=50) {
        let(
            center = circle_def[0],
            radius = circle_def[1],
            // Create 3D circular path
            circle_path = path3d(circle(r=radius, $fn=n_segments))
        )
        translate(center)
        path_sweep(profile, circle_path,closed=true);
    }


    
    
include <BOSL2/std.scad>

// Profile: proflie
// Points: 93 (xpositive), 184 (mirrored)
// Bounds: X[0.0000, 23.3978] Y[0.0000, 27.7526]

// Profile bounding box
// Width = max X * 2 (for mirrored profile)
// Height = max Y after centering (half of total Y range)
proflie_width = 46.795677;
proflie_height = 13.876282;

// Half profile from DXF (x-positive side, right half)
// Useful for rotate_extrude which requires x >= 0
proflie_xpositive = [
    [0.000000, 13.876282],
    [0.000000, 12.848409],
    [0.000000, 11.820536],
    [0.000000, 10.792664],
    [0.000000, 9.764791],
    [0.000000, 8.736918],
    [0.000000, 7.709045],
    [0.000000, 6.681173],
    [0.000000, 5.653300],
    [0.000000, 4.625427],
    [0.000000, 3.597555],
    [0.000000, 2.569682],
    [0.000000, 1.541809],
    [0.000000, 0.513936],
    [0.000000, -0.513936],
    [0.000000, -1.541809],
    [0.000000, -2.569682],
    [0.000000, -3.597555],
    [0.000000, -4.625427],
    [0.000000, -5.653300],
    [0.000000, -6.681173],
    [0.000000, -7.709045],
    [0.000000, -8.736918],
    [0.000000, -9.764791],
    [0.000000, -10.792664],
    [0.000000, -11.820536],
    [0.000000, -12.848409],
    [0.000000, -13.876282],
    [1.017297, -13.876282],
    [2.034595, -13.876282],
    [3.051892, -13.876282],
    [4.069189, -13.876282],
    [5.086487, -13.876282],
    [6.103784, -13.876282],
    [7.121081, -13.876282],
    [8.138379, -13.876282],
    [9.155676, -13.876282],
    [10.172973, -13.876282],
    [11.190271, -13.876282],
    [12.207568, -13.876282],
    [13.224865, -13.876282],
    [14.242163, -13.876282],
    [15.259460, -13.876282],
    [16.276757, -13.876282],
    [17.294055, -13.876282],
    [18.311352, -13.876282],
    [19.328649, -13.876282],
    [20.345947, -13.876282],
    [21.363244, -13.876282],
    [22.380541, -13.876282],
    [23.397839, -13.876282],
    [23.397839, -12.869473],
    [23.397839, -11.862664],
    [23.397839, -10.855855],
    [23.397839, -9.849046],
    [23.397839, -8.842238],
    [23.397839, -7.835429],
    [23.397839, -6.828620],
    [23.397839, -5.821811],
    [22.391703, -5.769082],
    [21.396590, -5.611471],
    [20.423404, -5.350707],
    [19.482806, -4.989645],
    [18.585102, -4.532242],
    [17.740127, -3.983509],
    [16.957139, -3.349458],
    [16.244718, -2.637036],
    [15.610667, -1.854049],
    [15.061934, -1.009074],
    [14.604531, -0.111370],
    [14.243469, 0.829228],
    [13.982704, 1.802414],
    [13.825094, 2.797527],
    [13.772365, 3.803663],
    [12.753197, 3.803663],
    [11.734029, 3.803663],
    [10.714861, 3.803663],
    [9.695693, 3.803663],
    [8.676524, 3.803663],
    [7.657356, 3.803663],
    [6.638188, 3.803663],
    [6.586539, 4.866491],
    [6.432076, 5.919302],
    [6.176257, 6.952175],
    [5.821492, 7.955376],
    [5.371124, 8.919451],
    [4.829398, 9.835313],
    [4.201419, 10.694331],
    [3.493106, 11.488411],
    [2.711133, 12.210068],
    [1.862870, 12.852501],
    [0.956311, 13.409656],
    [0.000000, 13.876282]
];

// Full symmetric profile (mirrored from xpositive, pre-computed)
proflie_mirroredx = [
    [0.000000, 13.876282],
    [0.000000, 12.848409],
    [0.000000, 11.820536],
    [0.000000, 10.792664],
    [0.000000, 9.764791],
    [0.000000, 8.736918],
    [0.000000, 7.709045],
    [0.000000, 6.681173],
    [0.000000, 5.653300],
    [0.000000, 4.625427],
    [0.000000, 3.597555],
    [0.000000, 2.569682],
    [0.000000, 1.541809],
    [0.000000, 0.513936],
    [0.000000, -0.513936],
    [0.000000, -1.541809],
    [0.000000, -2.569682],
    [0.000000, -3.597555],
    [0.000000, -4.625427],
    [0.000000, -5.653300],
    [0.000000, -6.681173],
    [0.000000, -7.709045],
    [0.000000, -8.736918],
    [0.000000, -9.764791],
    [0.000000, -10.792664],
    [0.000000, -11.820536],
    [0.000000, -12.848409],
    [0.000000, -13.876282],
    [1.017297, -13.876282],
    [2.034595, -13.876282],
    [3.051892, -13.876282],
    [4.069189, -13.876282],
    [5.086487, -13.876282],
    [6.103784, -13.876282],
    [7.121081, -13.876282],
    [8.138379, -13.876282],
    [9.155676, -13.876282],
    [10.172973, -13.876282],
    [11.190271, -13.876282],
    [12.207568, -13.876282],
    [13.224865, -13.876282],
    [14.242163, -13.876282],
    [15.259460, -13.876282],
    [16.276757, -13.876282],
    [17.294055, -13.876282],
    [18.311352, -13.876282],
    [19.328649, -13.876282],
    [20.345947, -13.876282],
    [21.363244, -13.876282],
    [22.380541, -13.876282],
    [23.397839, -13.876282],
    [23.397839, -12.869473],
    [23.397839, -11.862664],
    [23.397839, -10.855855],
    [23.397839, -9.849046],
    [23.397839, -8.842238],
    [23.397839, -7.835429],
    [23.397839, -6.828620],
    [23.397839, -5.821811],
    [22.391703, -5.769082],
    [21.396590, -5.611471],
    [20.423404, -5.350707],
    [19.482806, -4.989645],
    [18.585102, -4.532242],
    [17.740127, -3.983509],
    [16.957139, -3.349458],
    [16.244718, -2.637036],
    [15.610667, -1.854049],
    [15.061934, -1.009074],
    [14.604531, -0.111370],
    [14.243469, 0.829228],
    [13.982704, 1.802414],
    [13.825094, 2.797527],
    [13.772365, 3.803663],
    [12.753197, 3.803663],
    [11.734029, 3.803663],
    [10.714861, 3.803663],
    [9.695693, 3.803663],
    [8.676524, 3.803663],
    [7.657356, 3.803663],
    [6.638188, 3.803663],
    [6.586539, 4.866491],
    [6.432076, 5.919302],
    [6.176257, 6.952175],
    [5.821492, 7.955376],
    [5.371124, 8.919451],
    [4.829398, 9.835313],
    [4.201419, 10.694331],
    [3.493106, 11.488411],
    [2.711133, 12.210068],
    [1.862870, 12.852501],
    [0.956311, 13.409656],
    [0.000000, 13.876282],
    [-0.956311, 13.409656],
    [-1.862870, 12.852501],
    [-2.711133, 12.210068],
    [-3.493106, 11.488411],
    [-4.201419, 10.694331],
    [-4.829398, 9.835313],
    [-5.371124, 8.919451],
    [-5.821492, 7.955376],
    [-6.176257, 6.952175],
    [-6.432076, 5.919302],
    [-6.586539, 4.866491],
    [-6.638188, 3.803663],
    [-7.657356, 3.803663],
    [-8.676524, 3.803663],
    [-9.695693, 3.803663],
    [-10.714861, 3.803663],
    [-11.734029, 3.803663],
    [-12.753197, 3.803663],
    [-13.772365, 3.803663],
    [-13.825094, 2.797527],
    [-13.982704, 1.802414],
    [-14.243469, 0.829228],
    [-14.604531, -0.111370],
    [-15.061934, -1.009074],
    [-15.610667, -1.854049],
    [-16.244718, -2.637036],
    [-16.957139, -3.349458],
    [-17.740127, -3.983509],
    [-18.585102, -4.532242],
    [-19.482806, -4.989645],
    [-20.423404, -5.350707],
    [-21.396590, -5.611471],
    [-22.391703, -5.769082],
    [-23.397839, -5.821811],
    [-23.397839, -6.828620],
    [-23.397839, -7.835429],
    [-23.397839, -8.842238],
    [-23.397839, -9.849046],
    [-23.397839, -10.855855],
    [-23.397839, -11.862664],
    [-23.397839, -12.869473],
    [-23.397839, -13.876282],
    [-22.380541, -13.876282],
    [-21.363244, -13.876282],
    [-20.345947, -13.876282],
    [-19.328649, -13.876282],
    [-18.311352, -13.876282],
    [-17.294055, -13.876282],
    [-16.276757, -13.876282],
    [-15.259460, -13.876282],
    [-14.242163, -13.876282],
    [-13.224865, -13.876282],
    [-12.207568, -13.876282],
    [-11.190271, -13.876282],
    [-10.172973, -13.876282],
    [-9.155676, -13.876282],
    [-8.138379, -13.876282],
    [-7.121081, -13.876282],
    [-6.103784, -13.876282],
    [-5.086487, -13.876282],
    [-4.069189, -13.876282],
    [-3.051892, -13.876282],
    [-2.034595, -13.876282],
    [-1.017297, -13.876282],
    [0.000000, -13.876282],
    [0.000000, -12.848409],
    [0.000000, -11.820536],
    [0.000000, -10.792664],
    [0.000000, -9.764791],
    [0.000000, -8.736918],
    [0.000000, -7.709045],
    [0.000000, -6.681173],
    [0.000000, -5.653300],
    [0.000000, -4.625427],
    [0.000000, -3.597555],
    [0.000000, -2.569682],
    [0.000000, -1.541809],
    [0.000000, -0.513936],
    [0.000000, 0.513936],
    [0.000000, 1.541809],
    [0.000000, 2.569682],
    [0.000000, 3.597555],
    [0.000000, 4.625427],
    [0.000000, 5.653300],
    [0.000000, 6.681173],
    [0.000000, 7.709045],
    [0.000000, 8.736918],
    [0.000000, 9.764791],
    [0.000000, 10.792664],
    [0.000000, 11.820536],
    [0.000000, 12.848409]
];

// Full profile rotated 90 degrees clockwise around Z axis (pre-computed)
proflie_rotatedz = [
    [13.876282, 0.000000],
    [12.848409, 0.000000],
    [11.820536, 0.000000],
    [10.792664, 0.000000],
    [9.764791, 0.000000],
    [8.736918, 0.000000],
    [7.709045, 0.000000],
    [6.681173, 0.000000],
    [5.653300, 0.000000],
    [4.625427, 0.000000],
    [3.597555, 0.000000],
    [2.569682, 0.000000],
    [1.541809, 0.000000],
    [0.513936, 0.000000],
    [-0.513936, 0.000000],
    [-1.541809, 0.000000],
    [-2.569682, 0.000000],
    [-3.597555, 0.000000],
    [-4.625427, 0.000000],
    [-5.653300, 0.000000],
    [-6.681173, 0.000000],
    [-7.709045, 0.000000],
    [-8.736918, 0.000000],
    [-9.764791, 0.000000],
    [-10.792664, 0.000000],
    [-11.820536, 0.000000],
    [-12.848409, 0.000000],
    [-13.876282, 0.000000],
    [-13.876282, -1.017297],
    [-13.876282, -2.034595],
    [-13.876282, -3.051892],
    [-13.876282, -4.069189],
    [-13.876282, -5.086487],
    [-13.876282, -6.103784],
    [-13.876282, -7.121081],
    [-13.876282, -8.138379],
    [-13.876282, -9.155676],
    [-13.876282, -10.172973],
    [-13.876282, -11.190271],
    [-13.876282, -12.207568],
    [-13.876282, -13.224865],
    [-13.876282, -14.242163],
    [-13.876282, -15.259460],
    [-13.876282, -16.276757],
    [-13.876282, -17.294055],
    [-13.876282, -18.311352],
    [-13.876282, -19.328649],
    [-13.876282, -20.345947],
    [-13.876282, -21.363244],
    [-13.876282, -22.380541],
    [-13.876282, -23.397839],
    [-12.869473, -23.397839],
    [-11.862664, -23.397839],
    [-10.855855, -23.397839],
    [-9.849046, -23.397839],
    [-8.842238, -23.397839],
    [-7.835429, -23.397839],
    [-6.828620, -23.397839],
    [-5.821811, -23.397839],
    [-5.769082, -22.391703],
    [-5.611471, -21.396590],
    [-5.350707, -20.423404],
    [-4.989645, -19.482806],
    [-4.532242, -18.585102],
    [-3.983509, -17.740127],
    [-3.349458, -16.957139],
    [-2.637036, -16.244718],
    [-1.854049, -15.610667],
    [-1.009074, -15.061934],
    [-0.111370, -14.604531],
    [0.829228, -14.243469],
    [1.802414, -13.982704],
    [2.797527, -13.825094],
    [3.803663, -13.772365],
    [3.803663, -12.753197],
    [3.803663, -11.734029],
    [3.803663, -10.714861],
    [3.803663, -9.695693],
    [3.803663, -8.676524],
    [3.803663, -7.657356],
    [3.803663, -6.638188],
    [4.866491, -6.586539],
    [5.919302, -6.432076],
    [6.952175, -6.176257],
    [7.955376, -5.821492],
    [8.919451, -5.371124],
    [9.835313, -4.829398],
    [10.694331, -4.201419],
    [11.488411, -3.493106],
    [12.210068, -2.711133],
    [12.852501, -1.862870],
    [13.409656, -0.956311],
    [13.876282, 0.000000],
    [13.409656, 0.956311],
    [12.852501, 1.862870],
    [12.210068, 2.711133],
    [11.488411, 3.493106],
    [10.694331, 4.201419],
    [9.835313, 4.829398],
    [8.919451, 5.371124],
    [7.955376, 5.821492],
    [6.952175, 6.176257],
    [5.919302, 6.432076],
    [4.866491, 6.586539],
    [3.803663, 6.638188],
    [3.803663, 7.657356],
    [3.803663, 8.676524],
    [3.803663, 9.695693],
    [3.803663, 10.714861],
    [3.803663, 11.734029],
    [3.803663, 12.753197],
    [3.803663, 13.772365],
    [2.797527, 13.825094],
    [1.802414, 13.982704],
    [0.829228, 14.243469],
    [-0.111370, 14.604531],
    [-1.009074, 15.061934],
    [-1.854049, 15.610667],
    [-2.637036, 16.244718],
    [-3.349458, 16.957139],
    [-3.983509, 17.740127],
    [-4.532242, 18.585102],
    [-4.989645, 19.482806],
    [-5.350707, 20.423404],
    [-5.611471, 21.396590],
    [-5.769082, 22.391703],
    [-5.821811, 23.397839],
    [-6.828620, 23.397839],
    [-7.835429, 23.397839],
    [-8.842238, 23.397839],
    [-9.849046, 23.397839],
    [-10.855855, 23.397839],
    [-11.862664, 23.397839],
    [-12.869473, 23.397839],
    [-13.876282, 23.397839],
    [-13.876282, 22.380541],
    [-13.876282, 21.363244],
    [-13.876282, 20.345947],
    [-13.876282, 19.328649],
    [-13.876282, 18.311352],
    [-13.876282, 17.294055],
    [-13.876282, 16.276757],
    [-13.876282, 15.259460],
    [-13.876282, 14.242163],
    [-13.876282, 13.224865],
    [-13.876282, 12.207568],
    [-13.876282, 11.190271],
    [-13.876282, 10.172973],
    [-13.876282, 9.155676],
    [-13.876282, 8.138379],
    [-13.876282, 7.121081],
    [-13.876282, 6.103784],
    [-13.876282, 5.086487],
    [-13.876282, 4.069189],
    [-13.876282, 3.051892],
    [-13.876282, 2.034595],
    [-13.876282, 1.017297],
    [-13.876282, 0.000000],
    [-12.848409, 0.000000],
    [-11.820536, 0.000000],
    [-10.792664, 0.000000],
    [-9.764791, 0.000000],
    [-8.736918, 0.000000],
    [-7.709045, 0.000000],
    [-6.681173, 0.000000],
    [-5.653300, 0.000000],
    [-4.625427, 0.000000],
    [-3.597555, 0.000000],
    [-2.569682, 0.000000],
    [-1.541809, 0.000000],
    [-0.513936, 0.000000],
    [0.513936, 0.000000],
    [1.541809, 0.000000],
    [2.569682, 0.000000],
    [3.597555, 0.000000],
    [4.625427, 0.000000],
    [5.653300, 0.000000],
    [6.681173, 0.000000],
    [7.709045, 0.000000],
    [8.736918, 0.000000],
    [9.764791, 0.000000],
    [10.792664, 0.000000],
    [11.820536, 0.000000],
    [12.848409, 0.000000]
];

// Profile prepared for rotate_extrude around X axis (pre-computed)
proflie_for_revolve = [
    [27.752563, 0.000000],
    [26.724691, 0.000000],
    [25.696818, 0.000000],
    [24.668945, 0.000000],
    [23.641072, 0.000000],
    [22.613200, 0.000000],
    [21.585327, 0.000000],
    [20.557454, 0.000000],
    [19.529582, 0.000000],
    [18.501709, 0.000000],
    [17.473836, 0.000000],
    [16.445963, 0.000000],
    [15.418091, 0.000000],
    [14.390218, 0.000000],
    [13.362345, 0.000000],
    [12.334473, 0.000000],
    [11.306600, 0.000000],
    [10.278727, 0.000000],
    [9.250854, 0.000000],
    [8.222982, 0.000000],
    [7.195109, 0.000000],
    [6.167236, 0.000000],
    [5.139364, 0.000000],
    [4.111491, 0.000000],
    [3.083618, 0.000000],
    [2.055745, 0.000000],
    [1.027873, 0.000000],
    [0.000000, 0.000000],
    [0.000000, -1.017297],
    [0.000000, -2.034595],
    [0.000000, -3.051892],
    [0.000000, -4.069189],
    [0.000000, -5.086487],
    [0.000000, -6.103784],
    [0.000000, -7.121081],
    [0.000000, -8.138379],
    [0.000000, -9.155676],
    [0.000000, -10.172973],
    [0.000000, -11.190271],
    [0.000000, -12.207568],
    [0.000000, -13.224865],
    [0.000000, -14.242163],
    [0.000000, -15.259460],
    [0.000000, -16.276757],
    [0.000000, -17.294055],
    [0.000000, -18.311352],
    [0.000000, -19.328649],
    [0.000000, -20.345947],
    [0.000000, -21.363244],
    [0.000000, -22.380541],
    [0.000000, -23.397839],
    [1.006809, -23.397839],
    [2.013618, -23.397839],
    [3.020426, -23.397839],
    [4.027235, -23.397839],
    [5.034044, -23.397839],
    [6.040853, -23.397839],
    [7.047662, -23.397839],
    [8.054471, -23.397839],
    [8.107200, -22.391703],
    [8.264810, -21.396590],
    [8.525575, -20.423404],
    [8.886637, -19.482806],
    [9.344040, -18.585102],
    [9.892773, -17.740127],
    [10.526823, -16.957139],
    [11.239245, -16.244718],
    [12.022233, -15.610667],
    [12.867208, -15.061934],
    [13.764912, -14.604531],
    [14.705510, -14.243469],
    [15.678696, -13.982704],
    [16.673809, -13.825094],
    [17.679945, -13.772365],
    [17.679945, -12.753197],
    [17.679945, -11.734029],
    [17.679945, -10.714861],
    [17.679945, -9.695693],
    [17.679945, -8.676524],
    [17.679945, -7.657356],
    [17.679945, -6.638188],
    [18.742772, -6.586539],
    [19.795584, -6.432076],
    [20.828457, -6.176257],
    [21.831658, -5.821492],
    [22.795732, -5.371124],
    [23.711594, -4.829398],
    [24.570613, -4.201419],
    [25.364692, -3.493106],
    [26.086349, -2.711133],
    [26.728782, -1.862870],
    [27.285937, -0.956311],
    [27.752563, 0.000000],
    [27.285937, 0.956311],
    [26.728782, 1.862870],
    [26.086349, 2.711133],
    [25.364692, 3.493106],
    [24.570613, 4.201419],
    [23.711594, 4.829398],
    [22.795732, 5.371124],
    [21.831658, 5.821492],
    [20.828457, 6.176257],
    [19.795584, 6.432076],
    [18.742772, 6.586539],
    [17.679945, 6.638188],
    [17.679945, 7.657356],
    [17.679945, 8.676524],
    [17.679945, 9.695693],
    [17.679945, 10.714861],
    [17.679945, 11.734029],
    [17.679945, 12.753197],
    [17.679945, 13.772365],
    [16.673809, 13.825094],
    [15.678696, 13.982704],
    [14.705510, 14.243469],
    [13.764912, 14.604531],
    [12.867208, 15.061934],
    [12.022233, 15.610667],
    [11.239245, 16.244718],
    [10.526823, 16.957139],
    [9.892773, 17.740127],
    [9.344040, 18.585102],
    [8.886637, 19.482806],
    [8.525575, 20.423404],
    [8.264810, 21.396590],
    [8.107200, 22.391703],
    [8.054471, 23.397839],
    [7.047662, 23.397839],
    [6.040853, 23.397839],
    [5.034044, 23.397839],
    [4.027235, 23.397839],
    [3.020426, 23.397839],
    [2.013618, 23.397839],
    [1.006809, 23.397839],
    [0.000000, 23.397839],
    [0.000000, 22.380541],
    [0.000000, 21.363244],
    [0.000000, 20.345947],
    [0.000000, 19.328649],
    [0.000000, 18.311352],
    [0.000000, 17.294055],
    [0.000000, 16.276757],
    [0.000000, 15.259460],
    [0.000000, 14.242163],
    [0.000000, 13.224865],
    [0.000000, 12.207568],
    [0.000000, 11.190271],
    [0.000000, 10.172973],
    [0.000000, 9.155676],
    [0.000000, 8.138379],
    [0.000000, 7.121081],
    [0.000000, 6.103784],
    [0.000000, 5.086487],
    [0.000000, 4.069189],
    [0.000000, 3.051892],
    [0.000000, 2.034595],
    [0.000000, 1.017297],
    [0.000000, 0.000000],
    [1.027873, 0.000000],
    [2.055745, 0.000000],
    [3.083618, 0.000000],
    [4.111491, 0.000000],
    [5.139364, 0.000000],
    [6.167236, 0.000000],
    [7.195109, 0.000000],
    [8.222982, 0.000000],
    [9.250854, 0.000000],
    [10.278727, 0.000000],
    [11.306600, 0.000000],
    [12.334473, 0.000000],
    [13.362345, 0.000000],
    [14.390218, 0.000000],
    [15.418091, 0.000000],
    [16.445963, 0.000000],
    [17.473836, 0.000000],
    [18.501709, 0.000000],
    [19.529582, 0.000000],
    [20.557454, 0.000000],
    [21.585327, 0.000000],
    [22.613200, 0.000000],
    [23.641072, 0.000000],
    [24.668945, 0.000000],
    [25.696818, 0.000000],
    [26.724691, 0.000000]
];

// Scaled profile functions
function proflie_xpositive_scaled(s=1) = [for (p = proflie_xpositive) [p.x * s, p.y * s]];
function proflie_mirroredx_scaled(s=1) = [for (p = proflie_mirroredx) [p.x * s, p.y * s]];
function proflie_rotatedz_scaled(s=1) = [for (p = proflie_rotatedz) [p.x * s, p.y * s]];
function proflie_for_revolve_scaled(s=1) = [for (p = proflie_for_revolve) [p.x * s, p.y * s]];

// Default profile (mirrored, for path_sweep)
function profile_default(scalefactor=1) = proflie_mirroredx_scaled(scalefactor);

// Module to revolve the profile around the X axis
module proflie_revolve_around_x(scalefactor=1, angle=90) {
    rotate([90, 0, 0])
    translate([0, -proflie_height * scalefactor, 0])
    rotate_extrude(angle=angle, convexity=10)
    polygon(proflie_for_revolve_scaled(scalefactor));
}

// Preview module - shows all profile variants
module proflie_preview(scalefactor=1, test_length=100) {
    spacing_y = proflie_height * scalefactor * 4 + 10;
    test_line = [[0, 0, 0], [test_length, 0, 0]];

    // Swept profiles
    color("red")
    path_sweep(proflie_mirroredx_scaled(scalefactor), test_line);

    translate([0, spacing_y, 0])
    color("green")
    path_sweep(proflie_xpositive_scaled(scalefactor), test_line);

    translate([0, spacing_y * 2, 0])
    color("blue")
    path_sweep(proflie_rotatedz_scaled(scalefactor), test_line);

    // Revolve around X axis (90 degree turn)
    translate([0, spacing_y * 3, 0])
    color("purple")
    proflie_revolve_around_x(scalefactor, 90);

    // 2D profiles for reference
    translate([test_length + 20, 0, 0]) {
        color("red", 0.5)
        linear_extrude(1)
        polygon(proflie_mirroredx_scaled(scalefactor));

        translate([0, spacing_y, 0])
        color("green", 0.5)
        linear_extrude(1)
        polygon(proflie_xpositive_scaled(scalefactor));

        translate([0, spacing_y * 2, 0])
        color("blue", 0.5)
        linear_extrude(1)
        polygon(proflie_rotatedz_scaled(scalefactor));
    }
}

//proflie_preview();



// ===== TANGENT CONNECTION POINTS =====
// Points where entities connect tangentially, with rotation angle for joint placement
tangent_point_0 = [0.000000, -8.935948, 0.000000];
tangent_point_0_angle = -90.000000;
tangent_point_1 = [7.738758, 4.467974, 0.000000];
tangent_point_1_angle = -150.000000;
tangent_point_2 = [-7.738758, 4.467974, 0.000000];
tangent_point_2_angle = 150.000000;

// Module to place revolve joints at all tangent connection points
module place_revolve_joints_at_tangent_points(scalefactor=1, angle=90) {
    translate(tangent_point_0)
    rotate([0, 0, tangent_point_0_angle])
    proflie_revolve_around_x(scalefactor, angle);
    translate(tangent_point_1)
    rotate([0, 0, tangent_point_1_angle])
    proflie_revolve_around_x(scalefactor, angle);
    translate(tangent_point_2)
    rotate([0, 0, tangent_point_2_angle])
    proflie_revolve_around_x(scalefactor, angle);
}

// Sweep pattern - sweeps profile along each path (lines, arcs, and circles)
module sweep_pattern(profile) {
    union() {
        // Sweep lines
        

        // Sweep arcs
        sweep_arc(profile, arc_0, n_segments=50);
sweep_arc(profile, arc_1, n_segments=50);
sweep_arc(profile, arc_2, n_segments=50);

        // Sweep circles
        sweep_circle(profile, circle_0, n_segments=50);

    }
}

// Full pattern with tangent joints
module full_pattern(scalefactor=1, joint_angle=90) {
    union() {
        sweep_pattern(profile_default(scalefactor));
        place_revolve_joints_at_tangent_points(scalefactor, joint_angle);
    }
}

    //proflie_preview();

// Render sweep pattern only
//sweep_pattern(profile_default(scalefactor=1));

// Render full pattern with tangent joints
full_pattern(scalefactor=1, joint_angle=90);

    